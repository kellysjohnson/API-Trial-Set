/*! API_Trial_Data_Set 2015-05-29 */
function randomNumber(a,b){return Math.floor(Math.random()*(1+b-a)+a)}function dataDisplay(a){for(birdData=a,dataToAppend="",someSpace=0xb3a73cc1d78,console.log(a.recordings.length),i=0;i<a.recordings.length;i++){var b=i+1,c=i+1e3,d=a.recordings[i].file,e='<div class="btn btn-group-sm brown"><a ng-click="audio = audio" class="popup2" href='+d+">Listen</a></div>",f='<div class="input-group"><input name="user-provided" type="text" id="'+c+'" class="form-control js-query" placeholder="common name"><button class="btn btn-input-group submit js-search">Submit</button></div>';dataToAppend+='<div class="eachSet" id="'+i+'"><div class="row one"><div class="item"><div class="recording"> Recording '+b+': <span class="name reveal">'+a.recordings[i].en+"</span>"+e+'</div><div class="row two"><div class="answer"> Answer:'+f+"</div></div></div></div></div>"}$(".appendHere").append(dataToAppend)}function checkAnswer(){if(searchElement=objectID+1e3,console.log(searchElement),element=$("#"+searchElement).val(),element=element.toLowerCase(),console.log(element),correctAnswer=birdData.recordings[objectID].en,correctAnswer=correctAnswer.toLowerCase(),console.log(correctAnswer),correctAnswer==element){youreCorrect='<div class="btn btn-group-sm btn-success correct">Correct !</div>',$(".addAnswers").append(youreCorrect),console.log("Hi"),$(".points").remove(),sum+=10,sum>=100&&(sum=100);var a='<div class="points btn btn-group-sm"> Points: '+sum+"/"+total+"</div>";$(".buttonsHolder").prepend(a)}else console.log("Nope!"),youreWrong='<div class="btn btn-group-sm btn-danger wrong">Wrong X</div>',$(".addAnswers").append(youreWrong)}function toggleVisibility(a){var b=document.getElementById(a);(b.style.display="none")?b.style.display="block":b.style.display="none",console.log(b)}var domain="http://www.xeno-canto.org/api/2/recordings",query="?query=",countryGeneric="cnt:",unitiedStates="united&%20states",france="france",countryTest=domain+query+countryGeneric,testUS=countryTest+unitiedStates,testFrance=countryTest+france,testGivenUrl="http://www.xeno-canto.org/api/2/recordings?query=cnt:brazil",i,apiKey,localRoute="/apiBirds",birdData,dataToAppend,someSpace,previous=1,answerArray=[],number,objectID,correctAnswer,youreCorrect,youreWrong,element,searchElement,activeLink,modal,numQs=10,sum=0,total=10*numQs,qnumber=1,displayQuestions;$(document).ready(function(){$(".letsplay").on("click",function(){function a(a){var b=document.getElementById(a);(b.style.display="none")?b.style.display="block":b.style.display="none",console.log(b)}var b=birdData.recordings.length-1;number=randomNumber(0,b),console.log(number),objectID=number,number=previous,a(number),$(".letsplay").hide(),$(".newbird").show();var c='<div class="points btn btn-group-sm"> Points: '+sum+"/"+total+"</div>";$(".buttonsHolder").prepend(c)}),$(".newbird").on("click",function(){qnumber+=1;var a=document.getElementById(previous);(a.style.display="block")&&(a.style.display="none"),$(".js-search").attr("disabled",!1),$(".correct").remove(),$(".wrong").remove(),$(".questions").remove(),displayQuestions='<p class="questions"> Question: '+qnumber+"/"+numQs+"</p>",2==qnumber?$(".underflagdiv").replaceWith(displayQuestions):$(".flagdiv").append(displayQuestions);var b=birdData.recordings.length-1;if(number=randomNumber(0,b),console.log(number),objectID=number,toggleVisibility(number),previous=number,activeLink=birdData.recordings[number].file,qnumber>=10){var c=prompt("Would you like to start a new game?  Type 'yes' or 'no'");"yes"==c?location.reload():($(".container").hide(),alert("Thanks for playing!"))}}),$(".specificflag").on("click",function(){$(".letsplay").show()}),$(".appendHere").on("click",".js-search",function(){$(".correct").remove(),$(".wrong").remove(),checkAnswer(),$(this).attr("disabled",!0)}),$.ajax({type:"GET",url:localRoute,dataType:"json",jsonCallback:"callback",crossDomain:!0,success:function(a){console.log(a),dataDisplay(a),console.log("I work")},complete:console.log("Finished ajax call"),error:function(a){console.log("Danger Will Robinson, danger!"),console.log(a)}})});