/*! API_Trial_Data_Set 2015-06-02 */
function randomNumber(a,b){return Math.floor(Math.random()*(1+b-a)+a)}function shuffle(a){for(var b,c,d=a.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,b=a[d],a[d]=a[c],a[c]=b;return a}function dataDisplay(a){birdData=a,dataToAppend="",someSpace=0xb3a73cc1d78;var b=a.recordings.length;for(console.log(b),i=0;i<a.recordings.length;i++){var c=i+1,d=i+1e3;i+2e3;n=randomNumber(0,b),o=randomNumber(0,b),p=randomNumber(0,b);var e=a.recordings[i].file,f='<div class="btn btn-group-sm brown"><a target="blank" ng-click="audio = audio" class="popup2" href='+e+">Listen</a></div>",g='<div class="input-group"><input name="user-provided" type="text" id="'+d+'" class="form-control js-query" placeholder="common name"><button class="btn btn-input-group submit js-search">Submit</button></div>';dataToAppend+='<div class="eachSet" id="'+i+'"><div class="row one"><div class="item"><div class="recording"> Recording '+c+': <span class="name reveal">'+a.recordings[i].en+"</span>"+f+'</div><div class="row two"><div class="answer"> Answer:'+g+"</div></div></div></div></div>"}$(".appendHere").append(dataToAppend)}function checkAnswer(){if(searchElement=objectID+1e3,console.log(searchElement),element=$("#"+searchElement).val(),element=element.toLowerCase(),console.log(element),correctAnswer=birdData.recordings[objectID].en,correctAnswer=correctAnswer.toLowerCase(),console.log(correctAnswer),correctAnswer==element){youreCorrect='<div class="btn btn-group-sm btn-success correct">Correct !</div>',$(".addAnswers").append(youreCorrect),console.log("Hi"),$(".points").remove(),sum+=10,sum>=100&&(sum=100);var a='<div class="points btn btn-group-sm"> Points: '+sum+"/"+total+"</div>";$(".buttonsHolder").prepend(a)}else console.log("Nope!"),youreWrong='<div class="btn btn-group-sm btn-danger wrong">Wrong X</div>',$(".addAnswers").append(youreWrong)}function radioCheckAnswer(){if(correctAnswer=birdData.recordings[objectID].en,correctAnswer=correctAnswer.toLowerCase(),console.log(correctAnswer),correctAnswer==lastSelected){youreCorrect='<div class="btn btn-group-sm btn-success correct">Correct !</div>',$(".addAnswers").append(youreCorrect),console.log("Hi"),$(".points").remove(),sum+=10,sum>=100&&(sum=100);var a='<div class="points btn btn-group-sm"> Points: '+sum+"/"+total+"</div>";$(".buttonsHolder").prepend(a)}else console.log("Nope!"),youreWrong='<div class="btn btn-group-sm btn-danger wrong">Wrong X</div>',$(".addAnswers").append(youreWrong)}function toggleVisibility(a){var b=document.getElementById(a);(b.style.display="none")?b.style.display="block":b.style.display="none",console.log(b)}var localRoute="/apiBirds",birdData,dataToAppend,someSpace,previous=1,answerArray=[],number,objectID,correctAnswer,youreCorrect,youreWrong,element,searchElement,activeLink,modal,numQs=10,sum=0,total=10*numQs,qnumber=1,totalforGame,country="brazil",displayQuestions,radioButtons,lastSelected,n,o,p;$(document).ready(function(){$(".letsplay").on("click",function(){function a(a){var b=document.getElementById(a);(b.style.display="none")?b.style.display="block":b.style.display="none",console.log(b)}var b=birdData.recordings.length-1;number=randomNumber(0,b),console.log(number),objectID=number,number=previous,answerArray=[birdData.recordings[number].en,birdData.recordings[n].en,birdData.recordings[o].en,birdData.recordings[p].en],console.log(correctAnswer);var c=shuffle(answerArray);radioButtons='<div ="answerForm"><div class="row"><div class="circle"></div><div class="result">'+c[0]+'</div></div><div class="row"><div class="circle"></div><div class="result">'+c[1]+'</div></div><div class="row"><div class="circle"></div><div class="result">'+c[2]+'</div></div><div class="row"><div class="circle"></div><div class="result">'+c[3]+"</div></div></div>",$(".appendHere").append(radioButtons),$(".appendHere").on("click",".circle",function(){console.log("hi!!!!"),lastSelected!=$(this).val()&&"undefined"!=typeof lastSelected&&(lastSelected=$(this).val(),console.log(lastSelected),$(this).siblings("input[type=radio]").attr("disabled","disabled"),$(this).toggleClass("dos"),radioCheckAnswer())}),a(number),$(".letsplay").hide(),$(".newbird").show();var d='<div class="points btn btn-group-sm"> Points: '+sum+"/"+total+"</div>";$(".buttonsHolder").prepend(d)}),$(".newbird").on("click",function(){qnumber+=1;var a=document.getElementById(previous);(a.style.display="block")&&(a.style.display="none"),$(".js-search").attr("disabled",!1),$(".correct").remove(),$(".wrong").remove(),$(".questions").remove(),displayQuestions='<p class="questions"> Question: '+qnumber+"/"+numQs+"</p>",2==qnumber?$(".underflagdiv").replaceWith(displayQuestions):$(".flagdiv").append(displayQuestions);var b=birdData.recordings.length-1;if(number=randomNumber(0,b),console.log(number),objectID=number,toggleVisibility(number),previous=number,activeLink=birdData.recordings[number].file,qnumber>10){totalforGame=sum;var c=angular.element($(".points")).scope();c.$apply(function(){c.player=Player.find({},"name").update("points",{points:sum})}),location.reload()}}),$(".appendHere").on("click",".js-search",function(){$(".correct").remove(),$(".wrong").remove(),checkAnswer(),$(this).attr("disabled",!0)}),$(".headerflag").on("click",".specificflag",function(){$(".letsplay").show(),$(".nameentry").hide(),console.log("I clicked a flag....");var a=$(this).attr("id");console.log(a),$.ajax({type:"GET",url:localRoute,jsonCallback:"callback",crossDomain:!0,success:function(a){console.log(a),dataDisplay(a),console.log("I work")},complete:console.log("Finished ajax call"),error:function(a){console.log("Danger Will Robinson, danger!"),console.log(a)}})})});